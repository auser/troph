require "json"
require "/Users/alerner/.poolparty/clouds.rb"

class TrophApi < Troph::Base
    
  server "troph" do
    
    # Add a periodic caller to update status
    add_runtime_caller Troph::PeriodicChecker, 2
    
    # Add handler to watch presence and join events
    add_message_handler Troph::PresenceHandler
    add_message_handler Troph::JoinHandler
    
    store :cloud, clouds[:pp2]
    
    # get_nodes_method "%x{server-list-active internal_ip}.chomp.split('\t')"
  end
  
end